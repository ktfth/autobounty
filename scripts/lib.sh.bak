#!/usr/bin/env bash
set -euo pipefail

log() {
  echo "[$(date +'%F %T')] $*"
}

log_error() {
  echo "[$(date +'%F %T')] ERROR: $*" >&2
}

require_command() {
  command -v "$1" >/dev/null 2>&1 || { log_error "Missing command: $1"; exit 1; }
}

require_file() {
  [[ -f "$1" ]] || { log_error "Missing file: $1"; exit 1; }
}

require_dir() {
  [[ -d "$1" ]] || { log_error "Missing dir: $1"; exit 1; }
}

is_writable_dir() {
  [[ -d "$1" ]] && [[ -w "$1" ]]
}
